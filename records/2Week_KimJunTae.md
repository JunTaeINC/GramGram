# ğŸ” 2Week_KimJunTae.md

## ğŸ˜„ Title: [2Week] ê¹€ì¤€íƒœ

## ğŸ“• ë¯¸ì…˜ ìš”êµ¬ì‚¬í•­ ë¶„ì„ & ì²´í¬ë¦¬ìŠ¤íŠ¸
### ğŸ”¥ í•„ìˆ˜ ë¯¸ì…˜
> í˜¸ê°í‘œì‹œ í•  ë•Œ ì˜ˆì™¸ì²˜ë¦¬ ì¼€ì´ìŠ¤ 3ê°€ì§€ ì²˜ë¦¬
> - í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í™œìš©í•´ì„œ TDD ë°©ì‹ìœ¼ë¡œ í’€ì´
- [X] Case 1 : ì¤‘ë³µìœ¼ë¡œ í˜¸ê°í‘œì‹œì‹œ ì˜ˆì™¸ì²˜ë¦¬
  - InstaId ABCD -> abcd (ì™¸ëª¨)
  - InstaId ABCD -> abcd (ì™¸ëª¨) â—ì˜ˆì™¸ ë°œìƒâ—`rq.historyBack`ë¥¼ í™œìš©
- [X] Case 2 : 11ëª… ì´ìƒì˜ í˜¸ê°ìƒëŒ€ë¥¼ ë“±ë¡ì‹œ ì˜ˆì™¸ì²˜ë¦¬
  - `rq.historyBack`ë¥¼ í™œìš©
- [X] Case 3 : í˜¸ê°í‘œì‹œ ì‚¬ìœ  ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„
  - InstaId ABCD -> abcd (ì™¸ëª¨)
    - abcd (ì™¸ëª¨)
  - InstaId ABCD -> abcd (ì„±ê²©)
    - abcd (ì„±ê²©) ìœ¼ë¡œ ìˆ˜ì •
    - `msg=bbbb ì— ëŒ€í•œ í˜¸ê°ì‚¬ìœ ë¥¼ ì™¸ëª¨ì—ì„œ ì„±ê²©ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.` ë©”ì‹œì§€ ì¶œë ¥
---
### ğŸ”¥ ì¶”ê°€ ë¯¸ì…˜
- [X] ë„¤ì´ë²„ ë¡œê·¸ì¸ ê¸°ëŠ¥êµ¬í˜„
    - `NAVER__{"id": 2731659195, "gender": "M", "name": "í™ê¸¸ë™"}` âŒ
    - `NAVER__2731659195` â­•ï¸
- [ ] ì•„ì´ë”” ì°¾ê¸°
- [ ] ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
  - ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±í•˜ì—¬ ì´ë©”ì¼ë¡œ ë°œì†¡
- [X] ë°ì´ì§€ UIë¥¼ í™œìš©í•˜ì—¬ ë””ìì¸ ê°œì„ 
- [ ] QueryDSL ë„ì… (í˜¸ê°í‘œì‹œ ìƒëŒ€ ê²€ìƒ‰ê¸°ëŠ¥)
- [ ] íšŒì›ê°€ì…ì‹œ ì¶•í•˜ë©”ì¼ ë°œì†¡
- [ ] íšŒì›ê°€ì…ì‹œ í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ
- [ ] ì†Œì…œ ë¡œê·¸ì¸ì‹œ í”„ë¡œí•„ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
- [ ] ëˆ„êµ°ê°€ê°€ ë³¸ì¸ì—ê²Œ í˜¸ê°í‘œì‹œë¥¼ í–ˆì„ ë•Œ ì•Œë¦¼
- [ ] ê¸°ì¡´ì½”ë“œ ë¦¬í™í† ë§
---

## ğŸ“— 2ì£¼ì°¨ ë¯¸ì…˜ ìš”ì•½

---

### **[ ğŸ“ ì ‘ê·¼ ë°©ë²• ]**

> Case 1 : ì¤‘ë³µìœ¼ë¡œ í˜¸ê°í‘œì‹œì‹œ ì˜ˆì™¸ì²˜ë¦¬
> - `LikeablePersonService`ì— `like()` ë©”ì„œë“œë¥¼ í™œìš©í•´ì„œ í•´ê²°
> - ë§Œì•½ ì¶”ê°€í•˜ë ¤ëŠ” í˜¸ê°ìƒëŒ€ê°€ ìˆì„ì‹œ `rq.historyBack`

> Case 2 : 11ëª… ì´ìƒì˜ í˜¸ê°ìƒëŒ€ë¥¼ ë“±ë¡ì‹œ ì˜ˆì™¸ì²˜ë¦¬
> - `LikeablePersonService`ì— `like()` ë©”ì„œë“œë¥¼ í™œìš©í•´ì„œ í•´ê²°
> - `fromLikeablePeople.size() > 10` ì˜ˆì™¸ ë°œìƒ

> Case 3 : í˜¸ê°í‘œì‹œ ì‚¬ìœ  ìˆ˜ì • ê¸°ëŠ¥ êµ¬í˜„
> - `LikeablePersonService`ì— `like()` ë©”ì„œë“œë¥¼ í™œìš©í•´ì„œ í•´ê²°
> - ë§Œì•½ ì…ë ¥í•œ í˜¸ê°ìƒëŒ€ê°€ ìˆì„ì‹œ `set` or `build`ë¡œ ì •ë³´ ë³€ê²½

### **[â—ï¸íŠ¹ì´ì‚¬í•­â—ï¸]**
> ğŸ’¡ Case 1
- `rq.historyBack()`ì€ í…ŒìŠ¤íŠ¸ì½”ë“œì—ì„œ `redirectedUrlPattern`ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ ì›ë˜ HTTP CODE 200ì„ ë°˜í™˜í•˜ì§€ë§Œ, 
 `resp.setStatus(HttpServletResponse.SC_BAD_REQUEST)`ì—ì„œ ë”°ë¡œ ì„¤ì •ì„ í•´ì£¼ì—ˆê¸° ë–„ë¬¸ì— HTTP CODE 400ì„ ë°˜í™˜.
  - `rq.redirectWithMsg()`ëŠ” HTTP CODE 300ì„ ë°˜í™˜.
- JPA ë©”ì„œë“œ ëª…ëª…ê·œì¹™ì—ì˜í•´ `Repository`ì—ì„œì˜ ë©”ì„œë“œëª… ì¤‘ìš”.

> ğŸ’¡ Case 2
- `member.getInstaMember().getFromLikeablePeople().size() > 10` ì¸ì¤„ ì•Œì•˜ì§€ë§Œ `member.getInstaMember().getFromLikeablePeople().size() > 9`
ê°€ 10ëª…ì—ì„œ ì¶”ê°€ ì…ë ¥ì‹œ ì—ëŸ¬ë©”ì„¸ì§€ ì¶œë ¥.
- `LikeablePersonController`ì—ì„œ êµ¬í˜„ì‹œ 10ëª…ì§¸ ë“±ë¡í• ë•Œ ì—ëŸ¬ë©”ì„¸ì§€ ì˜¤ë¥˜ì½”ë“œ Fë¡œ `í˜¸ê°ìƒëŒ€ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.` ì¶œë ¥ë˜ì„œ `Service`ì—ì„œ êµ¬í˜„

> ğŸ’¡ Case 3

- `@Builder`ê°€ `LikeablePerson`ì—”í‹°í‹°ì— ì ìš©ë˜ì—ˆì§€ë§Œ, `@Setter`ë¥¼ ì¶”ê°€í•´ì„œ ë§¤ë ¥í¬ì¸íŠ¸ë¥¼ ë‹¤ì‹œ ì„¤ì • í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤.
`@Setter`ë¥¼ êµ¬í˜„ í•˜ì§€ë§ê³  `@Builder`ë¥¼ êµ¬í˜„ í•˜ëŠ” ê²ƒë³´ë‹¤ ì½”ë“œê°€ ê°„ê²°í•˜ê¸° ë•Œë¬¸ì— í™œìš©í–ˆëŠ”ë° ì˜í•œê±´ì§€ ì˜ ëª¨ë¥´ê² ë‹¤.
- Case 1 ì—ì„œ ë§Œë“¤ì—ˆë˜ ì½”ë“œë¥¼ í•©ì¹  ìˆ˜ ìˆì„ê²ƒ ê°™ë‹¤. ì»¤ë°‹ì„ í•˜ê³  ë‚œí›„ ë¦¬í™í† ë§ ê³¼ì •ì—ì„œ ì½”ë“œë¥¼ í•©ì¹  ì˜ˆì •ì´ë‹¤.

> ğŸ’¡ ë„¤ì´ë²„ ë¡œê·¸ì¸
- ë„¤ì´ë²„ ë¡œê·¸ì¸ ê°™ì€ê²½ìš° Json ê·¸ ì•ˆì—ì„œì˜ `name`ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë°ì— ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë ¸ë‹¤. `get("response");`ë¥¼ í™œìš©í•˜ëŠ”ê±´ ì•Œê³  ìˆì—ˆëŠ”ë° ì–´ë””ì„œ ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ì§€ 
ëª°ë¼ì„œ ì‹œê°„ì´ ê±¸ë ¸ë‹¤.
- ê·¸ë ‡ê²Œ ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ì‹œë„ì¤‘ì— `oauthId = (String) oAuth2User.getAttributes().get("name");`ì´ë ‡ê²Œ ì‘ì„±í•˜ë‹ˆ êµ¬ê¸€ì•„ì´ë””ê°€ ë‚˜ì™”ë‹¤. ìš°ì—°ì¹˜ ì•Šê²Œ 
ë°œê²¬í•˜ê²Œ ë˜ì—ˆì§€ë§Œ ì´ê²ƒ ë˜í•œ í™œìš©í•˜ì˜€ë‹¤. `providerTypeCode`ë¥¼ í†µí•´ ì–´ë”” ì†Œì…œë¡œê·¸ì¸ ì¸ì§€ íŒŒì•…ê³  ê°ìì˜ `oauthId`ë¥¼ ì ìš©ì‹œì¼œì¤¬ë‹¤.

### **[ğŸ¤”íšŒê³ ]**
- Case 1, Case 3 ê²€ì¦ì´ ì˜ë˜ëŠ” ì¤„ ì•Œì•˜ì§€ë§Œ, ì „ì²´ `LikeablePerson`ì—ì„œì˜ ê²€ì¦ ë•Œë¬¸ì— ì´ ë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ë‚¬ë‹¤.
> - user1 -> likeLion(ì™¸ëª¨) â­•ï¸
> - user2 -> likeLion(ëŠ¥ë ¥) âŒ ì—ëŸ¬ ë°œìƒ
- ê·¸ë˜ì„œ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤. JPA ë©”ì„œë“œë¥¼ í™œìš©í•˜ì˜€ëŠ”ë°
```java
# LikeablePersonRepository
Optional<LikeablePerson> findByFromInstaMemberAndToInstaMember_username(InstaMember instaMember,String username);

# LikeablePersonService
Optional<LikeablePerson> optionalLikeablePerson =
                likeablePersonRepository.findByFromInstaMemberAndToInstaMember_username(fromInstaMember, username);
```
- `findByFromInstaMember` -> `LikeablePerson` ì¤‘ì—ì„œ `FromInstaMember`ê°€ ë§¤ê°œë³€ìˆ˜`fromInstaMember(InstaMember)` ì´ê³ (`And`),
- `ToInstaMember_username` -> `LikeablePerson` ì¤‘ì—ì„œ `ToInstaMember`ì˜ `UserName`ì´ ë§¤ê°œë³€ìˆ˜`username` ì¸ ê°ì²´ë¡œ í™œìš©í–ˆë‹¤.
- `And`ì˜ ê°¯ìˆ˜ + 1 = `ë§¤ê°œë³€ìˆ˜`ì˜ ê°¯ìˆ˜ ì´ë‹¤.
### **[ğŸ’«ë¦¬í™í† ë§]**