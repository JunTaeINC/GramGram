# 🔎 1Week_KimJunTae.md

## 😄 Title: [1Week] 김준태

## 📕 미션 요구사항 분석 & 체크리스트
### 🔥 필수 미션
- [X] 호감상대 삭제 기능구현
- [X] 호감상대 삭제 테스트 코드 기능구현
    - 호감목록 페이지에서 특정 항목에서 삭제버튼을 누르면, 해당 항목은 삭제되어야 한다.
        - 삭제를 처리하기 전에 해당 항목에 대한 소유권이 본인(로그인한 사람)에게 있는지 체크해야 한다.
    - 삭제 후 다시 호감목록 페이지로 돌아와야 한다.
        - `rq.redirectWithMsg` 함수 사용
---
### 🔥 추가 미션
- [X] 구글 로그인 기능구현
    - 스프링 `OAuth2` 클라이언트로 구현해주세요.
    - 구글 로그인으로 가입한 회원의 `providerTypeCode : GOOGLE`
- [ ] 네이버 로그인 기능구현
- [ ] 아이디 찾기
- [ ] 비밀번호 찾기
- [ ] 데이지 UI를 활용하여 디자인 개선
- [X] 기존코드 리펙토링
---
## 📗 N주차 미션 요약

---

**[ 📎 접근 방법]**
- 우선 강사님이 작성해신 코드가 어떻게 작동되는지 어떻게 설계되었는지 충분한 시간을 두고 강사님의 강의를 보면서 코드 구현에 대한 의미를 파악했다.
- 점프 투 스프링에서 연습했던 질문 삭제 방법을 생각하면서 구현해봤다.
- 구글 로그인 같은 경우 따로 카카오로그인에 대한 처리가 있는 코드를 찾아보니 없었다. 그래서 `application.yml`에 구글 정보를 입력하면 되나?
싶어서 시도를 해봤더니 됐다!



**[❗️특이사항❗️]**

- `.gitignore` 파일에 파일명을 넣었지만 깃커밋에 올라갔다.
    - 그래서 파일을 삭제후 다시 파일을 넣으니 그제서야 작동하였다.
- 구글 로그인 정보를 구현을 해나가는데 있어서 입력할것이 별로 없는데도 시간이 좀 걸렸다. `include`

**[🤔회고]**
- 구글과 카카오를 `API` 서비스를 이용하기 위해서는 `API Key`값이 필요한데 외부에 노출이 되면안된다. 그렇기에 `.gitignore`를 활용을 
해야했는데 `.gitignore`에 사용방법은 알고있었지만 `application.yml`에서의 자바의 `import`기능처럼 불러오는 기능을 알지 못했다.
하지만 강사님의 힌트로 알수있었다. `include`를 활용하는 방법이였는데 구글링과 강사님의 강의를 통해서 활용을 하는 방법을 알게 되었다.
- `Rq`클래스를 활용하여 지금 로그인된 정보에 편하게 접근이 가능했다. 원래 `Principal`를 활용하여 로그인된 정보에 접근하려 하였으나
 `Rq`클래스를 활용하여 로그인된 객체에 접근했다.
- `RsData`와 `Rq` 클래스를 활용하니 진짜 편했다. 하지만 혼자서 구현을 하기에는 아직 부족하다. 또한 코드의 작동원리에 대한 이해가 조금더 필요하다.


**[💫리펙토링]**

- `/likeablePerson`에 로그인 된 사용자들에게만 보여져서 컨트롤러에 따로 `@PreAuthorize("isAuthenticated()")` 어노테이션을 붙여주지않았다.
하지만 붙여줬어야했다. 2차검증이고 만약에 나쁜의도를 가진 사람이 링크를 알아내서 무슨일을 저지를지 모르기 때문에 최대한 검증을 해주는 것이 좋다.
- 객체간의 비교에서 `!=` 를사용해서 비교를 했었는데 객체간의 비교를 할땐 `Object.equals` 를 활용하자.
- 호감삭제 테스트 코드를 보면 정상으로 삭제 되었는지 확인하는 코드는 구현하지 않았다. 테스트 코드는 최대한 검증을 많이 해줄수록 더 좋기떄문에 추가를 해주었다.
그렇게 비교를 위해 `Service`에 아이디를 찾는 메소드를 구현하고 안에 객체가 있는지 확인하는 코드를 추가했다.
- 폼에서는 `GET` 방식과 `POST`방식으로 요청을 보낼수있는데 조회의 경우 `GET`을 사용하고 나머지는 `POST`를 사용하는 것이 좋다고 하신다.
그렇기에 `GET`방식으로 작성된 코드를 `POST` 방식으로 바꿔 주었다. 강사님의 말대로 `DELETE`방식도 있지만 의미 없어보여서 `POST`방식으로 바꾸었다.